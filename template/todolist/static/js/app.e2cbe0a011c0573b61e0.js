webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("o4u9")},"data-v-5b95d506",null).exports,l=s("/ocq"),o={props:["id","task","date","time","editstatus","done","tag"],methods:{status(t){this.$emit("emitstatus",t)},edit(t){this.$emit("emitedit",t)},remove(t){this.$emit("emitremove",t)}},computed:{cardstyle(){return this.done?"delete":"normal"}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.cardstyle,attrs:{id:"cardbox"}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"hover","body-style":{margin:"0px",padding:"10px"}}},[s("div",{staticClass:"contentbox"},[s("div",{staticClass:"left"},[s("div",{staticClass:"switchbox",on:{click:function(e){return t.status(t.id)}}},[s("el-switch",{attrs:{"active-color":"#A3A4A7","inactive-color":"#13ce66",value:!!t.done}})],1)]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"head"},[t._v(" "+t._s(t.date)+" "+t._s(t.time)+" "+t._s(t.editstatus))]),t._v(" "),s("div",{staticClass:"body"},[t._v(t._s(t.task))]),t._v(" "),s("div",{staticClass:"foot"},[""!=t.tag?s("span",[t._v(" "+t._s(t.tag))]):s("span",[t._v(" #默认#")]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.edit(t.id)}}},[t._v("编辑任务")]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.remove(t.id)}}},[t._v("移除任务")])],1)])])])],1)},staticRenderFns:[]};var r=s("VU/8")(o,d,!1,function(t){s("kBpm")},"data-v-70d570d2",null).exports,c={props:["id","task","date","editstatus","done","tag","deletetime","lefttime"],computed:{ishighlight(){return this.lefttime<=31?"highlight":"nothighlight"},bodystyle(){return this.done?"linethrough":"notlinethrough"},cardstyle(){return this.done?"linethrough":"notlinethrough"}},methods:{recovertask(t){this.$emit("emitrecover",t)},deletetask(t){this.$emit("emitdelete",t)}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.cardstyle,attrs:{id:"cardbox"}},[s("el-card",{staticClass:"box-card",attrs:{shadow:"hover","body-style":{margin:"0px",padding:"10px"}}},[s("div",{staticClass:"head"},[s("span",{staticClass:"nothighlight"},[t._v(" "+t._s(t.date)+" "+t._s(t.editstatus))]),t._v(" "),s("span",{staticClass:"nothighlight"},[t._v("   "+t._s(t.deletetime)+" 移到此处")]),t._v(" "),s("span",{class:t.ishighlight},[t._v("   "+t._s(t.lefttime)+" 天后自动删除")])]),t._v(" "),s("div",{staticClass:"body"},[t._v(t._s(t.task))]),t._v(" "),s("div",{staticClass:"foot"},[t.tag.length>0?s("span",[t._v(" #"+t._s(t.tag)+"#")]):s("span",[t._v(" #默认#")]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.recovertask(t.id)}}},[t._v("恢复任务")]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.deletetask(t.id)}}},[t._v("彻底删除")])],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(c,h,!1,function(t){s("mvgH")},"data-v-5f64103e",null).exports,m=s("I29D"),v=s.n(m),g={components:{Card:r,RecyclebinCard:u},data:()=>({input:"",allTasks:[]}),computed:{activeTasks(){return this.allTasks.filter(t=>!t.deleted)},finishedTasks(){return this.allTasks.filter(t=>!t.deleted&&t.done)},unfinishedTasks(){return this.allTasks.filter(t=>!t.deleted&&!t.done)},recyclebinTasks(){return this.allTasks.filter(t=>t.deleted)}},created(){v.a.post("/todolist/api",{code:100,data:""}).then(t=>{t.data.data.length>0&&(this.allTasks=t.data.data)}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"请求服务器数据出错！",type:"error"})})},methods:{getstatus(t){var e=this.allTasks.findIndex(e=>e.id==t),s={code:101,data:{id:t,done:Math.pow(0,this.allTasks[e].done)}};v.a.post("/todolist/api",s).then(t=>{this.allTasks[e].done=!this.allTasks[e].done}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"向服务器请求更新数据出错！",type:"error"})})},getremove(t){var e=this.allTasks.findIndex(e=>e.id==t),s={code:103,data:t};this.$confirm("稍后你可以在回收站中找到它, 继续吗?","移除该记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.a.post("/todolist/api",s).then(t=>{this.$message({type:"success",message:"移除成功!"}),this.allTasks[e].deleted=1,this.allTasks[e].deletetime=t.data.data}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"向服务器请求更新数据出错！",type:"error"})})}).catch(()=>{this.$message({type:"info",message:"已取消移除"})})},getedit(t){var e=this.allTasks.findIndex(e=>e.id==t);this.$prompt("你也可以输入😍emoji表情哦","编辑内容",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.allTasks[e].task+this.allTasks[e].tag}).then(({value:s})=>{var a={code:102,data:{id:t,content:s}};v.a.post("/todolist/api",a).then(t=>{this.allTasks[e].task=t.data.data.task,this.allTasks[e].tag=t.data.data.tag,this.allTasks[e].editstatus="编辑",this.$message({type:"success",message:"修改内容提交成功！"})}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"向服务器请求更新数据出错！",type:"error"})})}).catch(()=>{this.$message({type:"info",message:"取消编辑"})})},getrecover(t){var e=this.allTasks.findIndex(e=>e.id==t),s={code:104,data:t};this.$confirm("将此记录恢复到以前的位置, 继续吗?","恢复",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.a.post("/todolist/api",s).then(t=>{this.$message({type:"success",message:"恢复成功!"}),this.allTasks[e].deleted=0}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"向服务器请求更新数据出错！",type:"error"})})}).catch(()=>{this.$message({type:"info",message:"已取消恢复"})})},getdelete(t){var e=this.allTasks.findIndex(e=>e.id==t),s={code:105,data:t};console.log("delete"),this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{v.a.post("/todolist/api",s).then(t=>{this.allTasks.splice(e,1),this.$message({type:"success",message:"删除成功!"})}).catch(t=>{this.$message({showClose:!0,message:"向服务器请求更新数据出错！",type:"error"})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},submit(){var t=this.input.trim();if(t.length<=0)this.input="";else{var e={code:106,data:t};v.a.post("/todolist/api",e).then(t=>{this.allTasks.unshift(t.data.data),this.input=""}).catch(t=>{console.log(t),this.$message({showClose:!0,message:"请求服务器数据出错！",type:"error"})})}}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[t._m(0),t._v(" "),s("el-input",{attrs:{placeholder:"试试用 #内容# 的格式添加标签，例如：#加油💪#",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),s("div",{staticClass:"btnbox"},[s("el-button",{staticClass:"elbtn",attrs:{type:"success",disabled:0===this.input.length,size:"small",icon:"el-icon-thumb"},on:{click:t.submit}},[t._v("添加新任务")])],1),t._v(" "),s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"全部"}},[0===t.activeTasks.length?s("h3",[t._v("无记录...")]):s("span",[t._v("共"+t._s(t.activeTasks.length)+"条记录")]),t._v(" "),t._l(t.activeTasks,function(e){return s("Card",{key:e.id,attrs:{id:e.id,task:e.task,date:e.date,time:e.time,editstatus:e.editstatus,done:e.done,tag:e.tag},on:{emitstatus:t.getstatus,emitremove:t.getremove,emitedit:t.getedit}})})],2),t._v(" "),s("el-tab-pane",{attrs:{label:"未完成"}},[t.unfinishedTasks.length<=0?s("h3",[t._v("无记录...")]):s("span",[t._v("共"+t._s(t.unfinishedTasks.length)+"条记录")]),t._v(" "),t._l(t.unfinishedTasks,function(e){return s("Card",{key:e.id,attrs:{id:e.id,task:e.task,date:e.date,time:e.time,editstatus:e.editstatus,done:e.done,tag:e.tag},on:{emitstatus:t.getstatus,emitremove:t.getremove,emitedit:t.getedit}})})],2),t._v(" "),s("el-tab-pane",{attrs:{label:"已完成"}},[t.finishedTasks.length<=0?s("h3",[t._v("无记录...")]):s("span",[t._v("共"+t._s(t.finishedTasks.length)+"条记录")]),t._v(" "),t._l(t.finishedTasks,function(e){return s("Card",{key:e.id,attrs:{id:e.id,task:e.task,date:e.date,time:e.time,editstatus:e.editstatus,done:e.done,tag:e.tag},on:{emitstatus:t.getstatus,emitremove:t.getremove,emitedit:t.getedit}})})],2),t._v(" "),s("el-tab-pane",{attrs:{label:"回收站"}},[s("span",{attrs:{id:"recyclebin"}},[s("i",[t._v("回收站里的数据最多保留一年(按366天计算),过期自动删除")])]),t._v(" "),s("br"),t._v(" "),t.recyclebinTasks.length<=0?s("h3",[t._v("这里一片虚无...")]):s("span",[t._v("共"+t._s(t.recyclebinTasks.length)+"条记录")]),t._v(" "),t._l(t.recyclebinTasks,function(e){return s("RecyclebinCard",{key:e.id,attrs:{id:e.id,task:e.task,date:e.date,editstatus:e.editstatus,done:e.done,tag:e.tag,deletetime:e.deletetime,lefttime:e.lefttime},on:{emitrecover:t.getrecover,emitdelete:t.getdelete}})})],2)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("span",{staticClass:"header-left"},[this._v("待办事项")]),this._v(" "),e("span",{staticClass:"header-right"},[e("a",{attrs:{href:"/"}},[e("i",{staticClass:"el-icon-position"}),this._v("导航页")]),this._v(" "),e("a",{attrs:{href:"/logout"}},[e("i",{staticClass:"el-icon-switch-button"}),this._v("退出")])])])}]};var _=s("VU/8")(g,p,!1,function(t){s("klmE")},"data-v-716ac5db",null).exports;a.a.use(l.a);var f=new l.a({mode:"history",routes:[{path:"/todolist",name:"Home",component:_}]}),k=s("bQIR"),y=s.n(k);s("gFLX");a.a.config.productionTip=!1,a.a.use(y.a),new a.a({el:"#app",router:f,components:{App:n},template:"<App/>"})},gFLX:function(t,e){},kBpm:function(t,e){},klmE:function(t,e){},mvgH:function(t,e){},o4u9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e2cbe0a011c0573b61e0.js.map